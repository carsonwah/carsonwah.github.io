<!DOCTYPE html>
<html lang="zh-hk">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Hugo的專案結構 - Carson&#39;s Tech Note</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<meta name="author" content="Carson Wah" />
  <meta name="description" content="完成Hugo的基本setup後，我們來看看Hugo的project structure吧。
(強烈建議花點時間理解Hugo的整個結構，不然遇上問題會很迷茫)

" />

  <meta name="keywords" content="Hugo, theme, even" />






<meta name="generator" content="Hugo 0.30.2" />


<link rel="canonical" href="https://carsonwah.github.io/post/blogging/hugo/2017-12-18-hugo-file-structure/" />

<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="icon" href="/favicon.ico" />
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">




<link href="/dist/even.min.css?v=2.6.4" rel="stylesheet">
<link href="/lib/fancybox/jquery.fancybox-3.1.20.min.css" rel="stylesheet">

<meta property="og:title" content="Hugo的專案結構" />
<meta property="og:description" content="完成Hugo的基本setup後，我們來看看Hugo的project structure吧。

(強烈建議花點時間理解Hugo的整個結構，不然遇上問題會很迷茫)

" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://carsonwah.github.io/post/blogging/hugo/2017-12-18-hugo-file-structure/" />



<meta property="article:published_time" content="2017-12-18T21:49:08&#43;08:00"/>

<meta property="article:modified_time" content="2017-12-18T21:49:08&#43;08:00"/>











<meta itemprop="name" content="Hugo的專案結構">
<meta itemprop="description" content="完成Hugo的基本setup後，我們來看看Hugo的project structure吧。

(強烈建議花點時間理解Hugo的整個結構，不然遇上問題會很迷茫)

">


<meta itemprop="datePublished" content="2017-12-18T21:49:08&#43;08:00" />
<meta itemprop="dateModified" content="2017-12-18T21:49:08&#43;08:00" />
<meta itemprop="wordCount" content="2076">



<meta itemprop="keywords" content="Hugo," />
<meta name="twitter:card" content="summary"/><meta name="twitter:title" content="Hugo的專案結構"/>
<meta name="twitter:description" content="完成Hugo的基本setup後，我們來看看Hugo的project structure吧。

(強烈建議花點時間理解Hugo的整個結構，不然遇上問題會很迷茫)

"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">Carson&#39;s Tech Note</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">Home</li>
      </a><a href="/about/">
        <li class="mobile-menu-item">About Me</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">Archives</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">Categories</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">Tags</li>
      </a>
  </ul>
</nav>
  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        
<div class="logo-wrapper">
  <a href="/" class="logo" style="font-size:40px;">Carson&#39;s Tech Note</a>
</div>

<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">Home</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/about/">About Me</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">Archives</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">Categories</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">Tags</a>
      </li>
  </ul>
</nav>

    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">Hugo的專案結構</h1>

      <div class="post-meta">
        <span class="post-time"> 2017-12-18 </span>
        <div class="post-category">
            <a href="/categories/blogging/">Blogging</a>
          </div>
        
      </div>
    </header>

    
    
<div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">文章目錄</h2>
  <div class="post-toc-content">
      <nav id="TableOfContents">
<ul>
<li><a href="#overview">Overview</a></li>
<li><a href="#1-基本設定">1. 基本設定：</a>
<ul>
<li><a href="#config-toml">config.toml</a></li>
</ul></li>
<li><a href="#2-網頁模板渲染-template-rendering">2. 網頁模板渲染 (Template Rendering)</a>
<ul>
<li><a href="#themes">themes/</a></li>
<li><a href="#layouts">layouts/</a></li>
</ul></li>
<li><a href="#3-內容管理">3. 內容管理</a>
<ul>
<li><a href="#content">content/</a></li>
<li><a href="#archetypes">archetypes/</a></li>
<li><a href="#內部連結">內部連結</a></li>
<li><a href="#static">static/</a></li>
<li><a href="#data">data/</a></li>
</ul></li>
</ul>
</nav>
  </div>
</div>

    
    <div class="post-content">
      <p>完成Hugo的基本<a href="{{&lt; ref &quot;post/blogging/hugo/2017-11-13-set-up-hugo.md&quot; &gt;}}">setup</a>後，我們來看看Hugo的project structure吧。</p>

<p><em>(強烈建議花點時間理解Hugo的整個結構，不然遇上問題會很迷茫)</em></p>

<p></p>

<h1 id="overview">Overview</h1>

<p>執行<code>hugo new site</code>後的專案：</p>

<pre><code>.
├── archetypes/
├── content/
├── data/
├── layouts/
├── static/
├── themes/
└── config.toml
</code></pre>

<h1 id="1-基本設定">1. 基本設定：</h1>

<h2 id="config-toml">config.toml</h2>

<p>這是整個project的設定文件，裡面會define各種variables，有些是hugo的設定，有些是被layouts裡的html檔拿來用。</p>

<p>例如<strong><em>ananke</em></strong>主題的config.toml:</p>

<pre><code class="language-toml"># --------- Hugo設定 ---------
title = &quot;Notre-Dame de Paris&quot;
baseURL = &quot;https://example.com&quot;
languageCode = &quot;en-us&quot;
theme = &quot;ananke&quot;

# --------- ananke theme所需的設定 ---------
Paginate = 3
googleAnalytics = &quot;&quot;
enableRobotsTXT = true

[sitemap]
  changefreq = &quot;monthly&quot;
  priority = 0.5
  filename = &quot;sitemap.xml&quot;

[params]
  favicon = &quot;&quot;
  description = &quot;The last theme you'll ever need. Maybe.&quot;
  twitter = &quot;https://twitter.com/GoHugoIO&quot;
  github = &quot;&quot;
</code></pre>

<p>Hugo的預設config檔是用<a href="https://github.com/toml-lang/toml">toml</a> syntax，也可以設置成<code>yaml</code>或<code>json</code>，功能上沒有分別。</p>

<ul>
<li><strong>title</strong>: 主頁的標題，也有機會用在其他地方</li>
<li><strong>baseURL</strong>: 所有relative path前面都會加上這baseURL (如<code>blog/post.md</code>變成<code>https://example.com/blog/post.md</code>)</li>
<li><strong>languageCode</strong>: 決定網頁語言，對單語言的blog用途不大，主要是讓search engine看</li>
<li><strong>theme</strong>: 使用哪個主題 (在<code>themes/</code>底下)</li>
<li><a href="https://gohugo.io/getting-started/configuration/">其他&hellip;</a></li>
</ul>

<p>Hugo設定基本上所有theme都是共通的，但每個theme都會有一些自己的設定，例如在以上config中，github的link會變成<code>.Site.Params.github</code>，
讓負責render的html可以取用。此部份牽涉到 <em>Template Rendering</em> 。</p>

<hr />

<h1 id="2-網頁模板渲染-template-rendering">2. 網頁模板渲染 (Template Rendering)</h1>

<p>Hugo是一個static website generator，主要作用就是把各種動態資料、檔案，根據一早寫好的模板(templates)，渲染(render)成靜態的html檔。</p>

<h2 id="themes">themes/</h2>

<p>安裝主題的地方。例如最基本的<code>ananke</code>主題：</p>

<pre><code>themes/
└── ananke
    ├── LICENSE.md
    ├── README.md
    ├── archetypes  # important
    ├── exampleSite  # important
    ├── images
    ├── layouts  # important
    ├── package.json
    ├── src
    ├── static  # important
    └── theme.toml
</code></pre>

<p>其實主要的只有：</p>

<ul>
<li><strong>archetypes</strong>: <a href="#archetypes">下面會提及</a></li>
<li><strong>exampleSite</strong>: 主題的範例專案，一般安裝theme時會叫你由這裡複製config.toml來開始</li>
<li><strong>layouts</strong>: 一堆用作template的html檔，是整個網頁的基礎</li>
<li><strong>static</strong>: 主題所用的css, js, images等等</li>
</ul>

<h2 id="layouts">layouts/</h2>

<p>一個Hugo網頁必須要有主題才能運作，這是因為要取用到<code>layouts/</code>裡面的html檔。例如Home page會用到<code>/themes/ananke/layouts/index.html</code>來render。</p>

<p>可以customize layout，但不建議直接改<code>themes/</code>裡面的東西。Template有<a href="https://gohugo.io/templates/homepage/#homepage-template-lookup-order">look up order</a>，專案中的<code>layouts/index.html</code>會override<code>/themes/ananke/layouts/index.html</code>。</p>

<p>html檔裡有各種render block，例如當hugo見到<code>&lt;h1&gt;{{ .Params.bar }}&lt;/h1&gt;</code>，就會自動在render出<code>.Params.bar</code>的value。</p>

<p><em><a href="https://gohugo.io/themes/creating/">Link: theme的必備檔案</a></em></p>

<hr />

<h1 id="3-內容管理">3. 內容管理</h1>

<h2 id="content">content/</h2>

<p>這裡是放置你寫的blog post的地方。官方建議起碼加一個<code>post/</code>的sub-directory，我自己是會用很多sub-directory為文章分類，檔名用日期作prefix方便排序。例如：</p>

<pre><code>content/
└── post
    └── blogging
        └── hugo
            ├── 2017-10-21-choosing-tools.md
            ├── 2017-11-13-set-up-hugo.md
            └── 2017-12-18-hugo-file-structure.md
</code></pre>

<ul>
<li>不論開多少個sub-directory，Hugo還是能grab到文章。</li>
<li>執行<code>hugo new post/blogging/hugo/xxx.md</code>建立文章，Hugo預設就是新增在<code>content/</code>底下。</li>
</ul>

<h2 id="archetypes">archetypes/</h2>

<p>要理解 <strong>archetypes</strong> ，首先要了解 <strong>front matter</strong> 。</p>

<p>每次執行<code>hugo new</code>建立新post時，hugo會自動幫你在<code>.md</code>檔中加入了必需的 <em>front matter</em> ，類似一篇文章的metadata。</p>

<p>例如：<code>hugo new post/my-first-post.md</code></p>

<pre><code class="language-yaml">---
title: &quot;My First Post&quot; # Hugo自動把檔名format成標題
date: 2017-12-18T21:54:40+08:00
draft: true
---
Your markdown here, blahblahblah...
</code></pre>

<p>如果我想<code>post/</code>裡面新增的所有post都有一些特定的tag，我可以新增<code>archetypes/post.md</code>：</p>

<pre><code class="language-yaml">---
title: &quot;{{ replace .TranslationBaseName &quot;-&quot; &quot; &quot; | title }}&quot;
date: {{ .Date }}
draft: true
tags: [&quot;web development&quot;, &quot;blogging&quot;]
---
Your markdown here, blahblahblah...
</code></pre>

<ul>
<li><code>title</code>和<code>date</code>是hugo必需的，不然會有warning</li>
<li><code>{{ replace .TranslationBaseName &quot;-&quot; &quot; &quot; | title }}</code>是hugo的rendering block，功能就是把<code>my-first-post.md</code>變成<code>My First Post</code></li>
<li><code>tags</code>是我新增的新attribute</li>
</ul>

<p>執行<code>hugo new post/xxx.md</code>時，Hugo會按特定次序尋找<code>archetypes</code>檔來建立 <em>front matter</em> ：</p>

<ol>
<li>archetypes/post.md</li>
<li>archetypes/default.md</li>
<li>themes/<THEME>/archetypes/posts.md</li>
<li>themes/<THEME>/archetypes/default.md</li>
</ol>

<p><em>（Hugo目前<a href="https://discourse.gohugo.io/t/are-archetypes-for-nested-sections-supported-in-any-way/7963/3">無法支援nested archetypes</a>，所以<code>hugo new post/blog/xxx.md</code>只會找<code>archetypes/post.md</code>）</em></p>

<h2 id="內部連結">內部連結</h2>

<p><a href="https://gohugo.io/content-management/cross-references/">Hugo內置功能</a>，可以產生連結到其他page的link。</p>

<p>例如在此處，我可以用</p>

<pre><code class="language-markdown">[Link]({{&lt; ref &quot;post/blogging/hugo/2017-11-13-set-up-hugo.md&quot; &gt;}})
</code></pre>

<p>Render結果：<a href="{{&lt; ref &quot;post/blogging/hugo/2017-11-13-set-up-hugo.md&quot; &gt;}}">Link</a></p>

<h2 id="static">static/</h2>

<p>這裡一般是用來放css, js, images。例如：</p>

<pre><code>static/
└── images
    └── abc.png
</code></pre>

<p>可以用<code>![alt text](/images/abc.png)</code>來顯示圖片。</p>

<h2 id="data">data/</h2>

<p>此處可放一些網頁的data，例如<code>data/somedata.toml</code>：</p>

<pre><code>food = [&quot;Bread&quot;, &quot;Pasta&quot;, &quot;Rice&quot;]
</code></pre>

<p>然後可以用<code>{{ .Site.Data.somedata.food }}</code>獲取data。</p>

<ul>
<li>可用format: YAML, TOML, JSON</li>
<li><a href="https://gohugo.io/templates/data-templates/">data的詳細例子</a></li>
</ul>
    </div>

    
    

    
    

    <footer class="post-footer">
      <div class="post-tags">
          
          <a href="/tags/hugo/">Hugo</a>
          
        </div>

      
      <nav class="post-nav">
        
          <a class="prev" href="/post/developer_tools/git/2017-12-19-add-project-to-github/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">將本地Project放到Github</span>
            <span class="prev-text nav-mobile">上一篇</span>
          </a>
        
          <a class="next" href="/post/developer_tools/git/2017-11-16-set-up-passwordless-git/">
            <span class="next-text nav-default">git pull或push不用再打密碼</span>
            <span class="prev-text nav-mobile">下一篇</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        
  <div id="disqus_thread"></div>
    <script type="text/javascript">
    (function() {
        
        
        if (window.location.hostname === 'localhost') return;

        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        var disqus_shortname = 'carsonwah';
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com/" class="dsq-brlink" target="_blank">comments powered by <span class="logo-disqus">Disqus</span></a>

  
      </div>  
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
      <a href="mailto:carsonwah@gmail.com" class="iconfont icon-email" title="email" target="_blank"></a>
      <a href="https://github.com/carsonwah" class="iconfont icon-github" title="github" target="_blank"></a>
  <a href="https://carsonwah.github.io/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss" target="_blank"></a>
</div>

<div class="copyright">
  
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>
  
  <span class="copyright-year">
    &copy; 
    2017
    <span>&nbsp;|&nbsp;</span>
    <span class="author">Carson Wah</span>
  </span>
  
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
<script src="/lib/highlight/highlight.pack.js?v=20171001"></script>
<script type="text/javascript" src="/lib/jquery/jquery-3.2.1.min.js"></script>
  <script type="text/javascript" src="/lib/slideout/slideout-1.0.1.min.js"></script>
  <script type="text/javascript" src="/lib/fancybox/jquery.fancybox-3.1.20.min.js"></script>
<script type="text/javascript" src="/dist/even.min.js?v=2.6.4"></script>




</body>
</html>
